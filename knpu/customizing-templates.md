# Customizing Templates

The configuration lets us do a lot and we've already customized a lot of things in our config file, but if you really want to go far, you're going to need to learn how to override the many templates that are used by the bundle. Let's actually look at them. I'm going to go into vendor, Javier, easy add on bundle, resources, views, and then open up default. Ha, ha. These are all the many templates that are used to render the easy admin bundle admin section. We can override any of these. Even better than that, we can override any of these for specific entities, using different templates for different entities. Even different templates for different fields.

Let's look at a few important templates in here. The first one is layout. This is actually the full page layout that we're using. As you see, you can override this. It has lots of blocks in there, so that instead of completely replacing it, you can extend the original one and then just override the blocks you need. We won't specifically do that for the layout, but we will do that for the list template in a second, so you'll see how that works.

The list template is the template for the list page that we've been working on. Not surprisingly, there's also one for new, show and edit. Then most of the fields in here are actually things called field underscore. Remember earlier we talked about how each field, when you're rendering it, has a different type. We can see that inside of our easy admin bundle configuration. For example, under list, fields, if we look at first discovered at, that field type was a date, and you can see here the template is field_date.html.twig. If we look at that you can see how the actual field is rendered, which is a nice way to know what types of ways you can customize it.

All right, so how do we override these? Well, there's actually a bunch of different ways. On the same list search and show view configuration we've been on, near the bottom you'll see a place for advanced design configuration, where it talks about the templates. It talks about what the templates do and then down here it shows you a number of different ways that you can override stuff. It's a bit overwhelming at first. Basically there are two main ways, either via configuration, which are number one and number two, or via convention, which is where you put things into an easy_admin directory. We'll see both of those.

Let's suppose that we want to override the way the ID field is rendered inside the genus. Want to add a little key next to it, since it's the primary key. That means that we're going to override the field_id template, because the ID actually is its own type. I'm going to copy field_id, and then I'm going to go into app resources views. I already have an admin directory, so I'm just going to create a new directory under here, called fields. I'm going to paste that as _id.html.twig.

Here we'll add our little key, fa fa-key. Cool. In this case I just decided to put the template in this directory because that was a directory that I already had. Easy admin bundle isn't going to magically know that's it there. The way to customize it is, in config.yml, if I only want this template to be used for the ID under genus, then under genus ... You'll notice I'm not under list. I'm directly under genus, I can say, field_ID, that was the original name of the template down here, field_ID: and then the path to our new one, which is just going to be admin/fields/_id.html.twig.

That should do it. Refresh, and it's using our template. Perfect. It's only using it inside of that one type, notice it's not using it everywhere. The key thing is pretty cool, so I probably do want to use it everywhere, so I'm going to copy that, comment it out, and we can also put a templates' area under design. You can customize your templates on an entity by entity basis, or just for a specific field, or globally. Now it's everywhere.

Let's do something a little bit more difficult. I want to actually override the list template, because on the genus page I want to hide the delete button if an entity is published. Which means it's not just that I can go into my configuration and remove the delete action, I actually need it to be a little bit more conditional. The way to do that is actually to override this template.

Down here I'm going to go copy the list.html.twig. Then up inside my views directory, I'm going to show you the other way of overriding templates, which is by convention. In this case, if you create an easy_admin directory, and paste the template there, then it's automatically going to find and use our template.

The biggest thing when you're working inside of someone else's template is, what variables do you have access to? Inside list, I'll go into the content header area, I'm just going to add a dump function. Then in ID I'm going to do the same thing, I'll add a dump function there as well so we can see what variables both of those have. I'll refresh the genus list page. Ah, awesome, so the first one we see here is actually the one for the list template. You can see it has the same fields configuration that we've been working with before. A paginator instance and a couple of other things, like our entity config, things about our entity. There's a lot of stuff to dig in there, but if you need a piece of configuration, it's probably in there somewhere.

For each individual, inside of _ID, now we're actually rendering something for one specific item. The big difference here is we actually have an item key, which is actually the object we're rendering. We also have access to the back end configuration. Now if it's a little hard to look at in here, remember a lot of these are things that are already inside of our profiler for the easy admin bundle, so you can look at it there as well.

All right, so let's take out those dumps. The most important thing is that there is an item key whenever we're doing something for an individual row. We'll take out the dump in both places. Okay, so how can we hide the delete button for published genus? It's actually a little bit tricky.

Inside of the list template, if you search, there is a block called item actions. There's a variable called list_item_actions. This is set up here and then it's actually used down below, inside of a block called item actions. If you look at this actions template, this is basically the template that generates the links that you're seeing over here on the right. Basically this list item actions variable contains all of the links that should be rendered over there. Actually we can dump that to see what it looks like.

You see it's edit, show and delete. Basically we want to remove that delete key if this entity is published. This is going to be a little bit tricky. What I'm going to do is actually override the item actions block, and then change the list items actions variable, and then call the parent, item actions block. To do that I'm actually going to empty everything, and we're going to start by extending the base template. I'm going to use the @EasyAdmin syntax, and we can extend the list.html.twig. We're extending the base layout so we don't have to duplicate everything.

Then as we said a second ago, we're going to override the block called item actions. End block. Inside we want to basically change the list item actions variable. I'm going to say, set _list_item_actions = _list_item_actions again. I'm going to pipe that through a new filter we're about to create, called filter admin actions. Then I'm going to pass in an item variable.

Just to review here. I open up the base layout. List item actions is something that's set in our base template, and we want to change it. Then as we're actually looping over the table body, we have access to an item variable, which is actually our entity. By the time we get to item actions, we have access to that. It's a little bit tricky. All we need to do now is basically create this filter, which is going to see if the item, in this case the genus, is published. If it is, it's going to remove the delete key from this array.

Inside Twig, I'm going to create a new PHP class called EasyAdminExtension. This is going to be a twig extension, so I'll extend the \Twig_Extension class. I'll go to co-generate, or command end, and I'll override the get filters method. Here we're just going to return an array of the filters we want. New \Twig_SimpleFilter. The name of the filter should be, filter_admin_actions, and one that's called, we'll call a new method on this, called filter actions. Down below we'll create that filter actions, and it will have two arguments. First, it will be passed the item actions. It will actually be passed the list item actions that are getting passed through the filter. Then we're passing the item, which is whatever entity is being modified at that time.

Here we can do a check that says, well if item is an instance of genus, and the item is published, then we're going to unset item actions delete. Then we'll return item actions at the bottom. Phew, and that should do it. Now I'm using Symphony 3.3, with the new auto-wiring and auto-registration configuration, so actually I don't need to do anything else. My twig extension's going to be automatically registered as a service and tagged as a twig extension. It should just work. Let's go. Refresh, hold your breath.

It almost worked. You can see we're good except my actions are empty, and you probably noticed why. I set my list item actions, but what I forgot to do was then call my parent function. Parent function will actually use that new variable below. Now we've got it. The delete icon is only there when the item is not published. That was a really tricky example, which is why we went through it. Most of the time it's easier.

One of the other things you can do is you can customize templates on a field by field basis, instead of an entire field type. For example, let's say we want to customize how the full name is rendered, just this field. What we can do is we can go into the configuration. We can go down to our user, down to full name, and we can give it the expanded configuration and set the template option. I'll set it to, how about _field_user_full_name.html.twig. I'll copy that, and it's expecting that template to live in the standard easy admin bundle directory. Inside there I'll create that new template.

In here we can do whatever we want. If you don't remember what variables you have access to, you can use the dump function. We do have access to an item variable, which is the entity. We can say, if item.isScientist, that's a property on the user, then we'll do a cool graduation cap. Then down below we'll just print out value, which is the specific value for this full name field. We'll pipe that through default stranger, in case they don't have one.

All right, refresh that, and we got it. You can override templates at so many different levels. By extending the base layout, you can do really cool things where you're overriding just individual blocks. Most examples shouldn't be this hard, but that's why we showed it.

